


<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>IRL</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v=9999" type="text/css">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/select.css') }}?v=9999" type="text/css">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/results.css') }}" type="text/css">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/ionicons.min.css')}}" type="text/css">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}" type="text/css">
        <link href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet">
        <script src="{{ url_for('static', filename='javascript/instructions_modal.js') }}"></script>

    </head>
<body>
    <div id="wrapper">
        <div style="display: flex; justify-content: center; margin-top: 3vh; width: 80vw;">
            <div id="title">
                <h3>{{ title }}</h3>
            </div>
        </div>
    </div>
    <div>
        <div style="height: 80vh;">
            {% include "mobile_table.html" %}
        </div>
    </div>
        <br />
        <br />
    <div>
        <form> 
            <button class="submit-button" id="submit_button" style="margin-left: 45%" disabled>Submit</button>
        </form>
        
        <div>
            {% include "mobile_header.html" %}
        </div>
        <div id="footer_filler"></div>
        <footer class="footer">
            <div class="container">
                <span class="text-muted">Copyright © 2017 • Population Informatics Lab • Texas A&M University</span>
            </div>
        </footer>
    
        <!-- JS goes at the bottom for performance -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                paginateMobileTable();
            });
    
            function paginateMobileTable() {
                const table = document.getElementById("mobile-table");
                const rows = Array.from(table.rows);
                const colsPerPage = 1;
                let currentPage = 0;
    
                function renderPage() {
                    rows.forEach(row => {
                        Array.from(row.cells).forEach((cell, i) => {
                            // Skip the first column (index 0)
                            if (i === 0) return;

                            cell.style.display = (i >= currentPage * colsPerPage + 1 && i < (currentPage + 1) * colsPerPage + 1)
                                ? "table-cell"
                                : "none";
                        });
                    });
                }
    
                function addControls() {
                    const nav = document.createElement("div");
                    nav.id = "column-pagination-controls";

                    const submitButton = document.getElementById("submit_button")
                    const prev = document.createElement("button");
                    prev.textContent = "Prev";
                    prev.onclick = () => {
                        if (currentPage > 0) {
                            currentPage--;
                            renderPage();
                        }
                    };
    
                    const next = document.createElement("button");
                    next.textContent = "Next";
                    next.onclick = () => {
                        const totalCols = rows[0]?.cells.length || 0;
                        if ((currentPage + 1) * colsPerPage < totalCols) {
                            currentPage++;
                            renderPage();
                        }

                        if((currentPage + 1) * colsPerPage == totalCols) {
                            submitButton.disabled = false;
                        }
                    };
    
                    nav.appendChild(prev);
                    nav.appendChild(next);
                    table.parentElement.appendChild(nav);
                }
    
                renderPage();
                addControls();
            }
        </script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="{{ url_for('static', filename='javascript/choice_panel.js') }}"></script>
    </div>
    </body>
</html>
